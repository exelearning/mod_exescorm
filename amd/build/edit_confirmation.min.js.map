{"version":3,"file":"edit_confirmation.min.js","sources":["../src/edit_confirmation.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Confirmation modal for editing ExeScorm activities.\n *\n * @module mod_exescorm/edit_confirmation\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @copyright 3iPunt <https://www.tresipunt.com/>\n */\nimport * as Str from 'core/str';\nimport ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\n\n\n/**\n * Initialize the edit confirmation functionality.\n */\nexport const init = () => {\n    const editButtons = document.querySelectorAll('[data-action=\"edit-exescorm\"]');\n\n    editButtons.forEach(button => {\n        button.addEventListener('click', (e) => {\n            e.preventDefault();\n            const targetUrl = button.getAttribute('data-editurl');\n            showConfirmation(targetUrl);\n        });\n    });\n};\n\n/**\n * Show confirmation modal before redirecting to edit.\n *\n * @param {string} targetUrl The URL to redirect to if confirmed\n */\nexport const showConfirmation = (targetUrl) => {\n    Promise.all([\n        Str.get_string('edit', 'core'),\n        Str.get_string('yes', 'core'),\n        Str.get_string('cancel', 'core'),\n        Str.get_string('editdialogcontent', 'mod_exescorm'),\n        Str.get_string('editdialogcontent:caution', 'mod_exescorm'),\n        Str.get_string('editdialogcontent:continue', 'mod_exescorm'),\n    ]).then((strings) => {\n        // Center the body content using a div with text-center class.\n        const warnIcon = '<i class=\"fa fa-circle-exclamation text-danger\"></i> ';\n        const bodyContent = strings[3] + '<br><br><strong>' + warnIcon + strings[4] +\n            '</strong><br><br>' + '<div class=\"text-center\">' + strings[5] +\n            '</div>';\n        return ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: strings[0],\n            body: bodyContent,\n            buttons: {\n                save: strings[1],\n                cancel: strings[2]\n            }\n        });\n    }).then((modal) => {\n        modal.getRoot().on(ModalEvents.save, () => {\n            window.location.href = targetUrl;\n        });\n\n        modal.getRoot().on(ModalEvents.cancel, () => {\n            modal.hide();\n        });\n\n        modal.show();\n        return modal;\n    }).catch(() => {\n        window.location.href = targetUrl;\n    });\n};"],"names":["document","querySelectorAll","forEach","button","addEventListener","e","preventDefault","targetUrl","getAttribute","showConfirmation","Promise","all","Str","get_string","then","strings","bodyContent","ModalFactory","create","type","types","SAVE_CANCEL","title","body","buttons","save","cancel","modal","getRoot","on","ModalEvents","window","location","href","hide","show","catch"],"mappings":";;;;;;;mIA8BoB,KACIA,SAASC,iBAAiB,iCAElCC,SAAQC,SAChBA,OAAOC,iBAAiB,SAAUC,IAC9BA,EAAEC,uBACIC,UAAYJ,OAAOK,aAAa,gBACtCC,iBAAiBF,wBAUhBE,iBAAoBF,YAC7BG,QAAQC,IAAI,CACRC,IAAIC,WAAW,OAAQ,QACvBD,IAAIC,WAAW,MAAO,QACtBD,IAAIC,WAAW,SAAU,QACzBD,IAAIC,WAAW,oBAAqB,gBACpCD,IAAIC,WAAW,4BAA6B,gBAC5CD,IAAIC,WAAW,6BAA8B,kBAC9CC,MAAMC,gBAGCC,YAAcD,QAAQ,GAARA,wEAA6CA,QAAQ,GAArDA,6CACoCA,QAAQ,GAC5D,gBACGE,uBAAaC,OAAO,CACvBC,KAAMF,uBAAaG,MAAMC,YACzBC,MAAOP,QAAQ,GACfQ,KAAMP,YACNQ,QAAS,CACLC,KAAMV,QAAQ,GACdW,OAAQX,QAAQ,SAGzBD,MAAMa,QACLA,MAAMC,UAAUC,GAAGC,sBAAYL,MAAM,KACjCM,OAAOC,SAASC,KAAO1B,aAG3BoB,MAAMC,UAAUC,GAAGC,sBAAYJ,QAAQ,KACnCC,MAAMO,UAGVP,MAAMQ,OACCR,SACRS,OAAM,KACLL,OAAOC,SAASC,KAAO1B"}